$.personal={message:{initListBtn:function(){$(".btn-mark-read").click(function(){var a=$(".table");
var b=$.table.getAllSelectedCheckbox(a);
if(b.size()==0){return
}location.href=ctx+"/personal/message/markRead?"+b.serialize()+"&BackURL="+$.table.encodeTableURL(a)
});$(".btn-store").click(function(){var a=$.table.getAllSelectedCheckbox($(".table"));
if(a.size()==0){return
}$.app.confirm({title:"收藏消息",message:"确认收藏选中的消息吗？",ok:function(){location.href=ctx+"/personal/message/batch/store?"+a.serialize()
}})});$(".btn-clear").click(function(){var b=$(this).closest(".panel");
var c=b.data("state");
var a=b.data("state-info");
$.app.confirm({title:"清空"+a,message:"确认清空"+a+"吗？",ok:function(){location.href=ctx+"/personal/message/clear/"+c
}})});$(".btn-recycle-or-delete").click(function(){var e=$.table.getAllSelectedCheckbox($(".table"));
if(e.size()==0){return
}var c=$(this).closest(".panel");
var d=c.data("state");
var a=d!="trash_box";
var b=c.data("state-info");
$.app.confirm({title:a?"移动消息到垃圾箱":"删除垃圾箱消息",message:a?"确认将"+b+"中的消息移动到垃圾箱吗？":"确认删除垃圾箱选中的消息吗？",ok:function(){location.href=ctx+"/personal/message/batch/"+(a?"recycle":"delete")+"?"+e.serialize()
}})})},initViewBtn:function(){$(".message .accordion-toggle").on("click",function(){var b=$(this);
var c=$(b.attr("href"));
var d=c.attr("id").replace("collapse","");
if(!c.data("loaded")){c.data("loaded",true);
b.append("<img class='loading' src='"+ctx+"/static/images/loading.gif' style='height:20px'>");
c.find(".accordion-inner").load(ctx+"/personal/message/"+d+"/content",function(){b.find(".loading").remove()
});a(c)}});
function a(b){b.find(".btn-view-store").click(function(){var c=$(this).data("href");
$.app.confirm({title:"收藏消息",message:"确认收藏该消息吗？",ok:function(){location.href=c
}});return false
});b.find(".btn-view-recycle").click(function(){var c=$(this).data("href");
$.app.confirm({title:"移动消息到垃圾箱",message:"确认把该消息移动到垃圾箱吗？",ok:function(){location.href=c
}});return false
});b.find(".btn-view-delete").click(function(){var c=$(this).data("href");
$.app.confirm({title:"删除垃圾箱消息",message:"确认从垃圾箱删除该消息吗？",ok:function(){location.href=c
}});return false
})}a($(document))
}}};